<?php
/**
 * Naxero.com
 * Professional ecommerce integrations for Magento.
 *
 * PHP version 7
 *
 * @category  Magento2
 * @package   Naxero
 * @author    Platforms Development Team <contact@naxero.com>
 * @copyright Â© Naxero.com all rights reserved
 * @license   https://opensource.org/licenses/mit-license.html MIT License
 * @link      https://www.naxero.com
 */
?>

<?php
// Get the block data
$element = $block->getData('element');
$products = $block->getData('product_list');
?>

<!-- Select 2 CSS -->
<!-- Todo - Move to local -->
<style>
 @import url('https://cdn.jsdelivr.net/npm/select2@4.1.0-beta.1/dist/css/select2.min.css');
</style>

<!-- Product list selector -->
<select id="<?= $element->getId() ?>" name="<?= $element->getName() ?>">
<?php foreach ($products as $product): ?>
    <option value="<?= $product['value'] ?>">
        <?= $product['label'] ?>
    </option>
<?php endforeach; ?>
</select>

<!-- Select 2 script -->
<script>
    require([
    'jquery',
    'mage/translate',
    'select2'
], function($, __, select2) {
    'use strict';

    $('<?= $element->getId() ?>').select2({
        theme: 'classic'
    });
});
    
</script>