<?php
    // Get the config
    $config = $block->getConfig();
?>
<?php if ($config) : ?>
    <?php 
        // Display settings
        $buttonDisabled = $config['guest']['click_event'] !== 'disabled' ? '' : 'disabled';
        $loggedInClass = '';
        //$loggedInClass = $block->customerHelper->isLoggedIn() ? 'aip-login-popup' : '';
        //$purchaseData = $block->customerHelper->getPurchaseData();

        //$pid = $this->getProduct()->getId() 
        $pid = 1562;
    ?>
    <div id="aip-<?= $pid ?>" class="aip-button-container" data-bind="scope:'instant-purchase'">
        <button type="button"
                class="<?= $loggedInClass ?> action primary instant-purchase aip-button"
                disabled="<?= $buttonDisabled ?>"
                title="<?= __($config['general']['button_text']) ?>">
                <span translate="buttonText" />
        </button>
    </div>

    <script>
        require([
            'jquery',
            'Naxero_AdvancedInstantPurchase/js/view/instant-purchase',
        ], function ($, Aip) {
            'use strict';

            Aip.setPurchaseData();
        });
    </script>

<?php endif; ?>